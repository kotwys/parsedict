Данный инструмент позволяет конвертировать текст, оформление которого выражает
некую структуру (например, словарные статьи), из .docx-файла в структурированные
данные.

Для разбора используются комбинаторы парсеров из библиотеки `parsy`.
См. описание грамматики в файле `grammar.lissp` (на данный момент вывод
полностью соответствует тому, что возвращает парсер).  Программа была написана
для разбора словарных статей издания [«Лексика бесермян: наследие
Т. И. Тепляшиной»][leksika] (С. А. Максимов, УдмФИЦ УрО РАН, 2024), но
грамматика может быть легко модифицирована для разбора других текстов.

# Установка

Для работы программы необходима версия Python не старше 3.10.

Для установки всех необходимых зависимостей введите в коммандной строке:
```sh
pip install -r requirements.txt
```

# Использование

Точкой входа в программу является скрипт `main.py`.  Интерфейс командной строки
выглядит следующим образом:

```sh
python main.py <infile>
```

**infile** --- это путь до .docx-файла, который необходимо разобрать.

Также принимаются следующие необязательные аргументы:

- **-h**, **--help**

    Выводит справку.

- **--par** *PAR*

    Анализировать не весь файл, а только абзац под номером *PAR* (отсчёт
    начинается с нуля).  Если не указано, анализируются все абзацы документа (в
    некоторых случаях применяются правила объединения нескольких абзацев в одну
    статью, см. файл [lexer.py](./lexer.py)).

- **--format** {*raw*,*yaml*} (по умолчанию: *yaml*)

    Вывести результат разбора непосредственно в виде словаря Python или в
    формате YAML.

    При выводе в YAML скрываются поля, начинающиеся с нижнего подчёркивания или
    содержащие «ложные» значения (`False`, `None`, пустые коллекции).  Также
    ключи сортируются в порядке, удобном для просмотра человеком.

    Вывод в YAML представляет собой *поток из нескольких отдельных документов*
    (разделены строками `---`).

- **--partial**

    Осуществить частичный анализ (совместимо только с форматом вывода *raw*).
    Может быть полезно при отладке грамматики.

- **-j** *JOBS*, **--jobs** *JOBS*

    Запустить *JOBS* параллельных процессов для разбора.  При параллельной
    обработке на нескольких процессах порядок результатов в выводе не
    гарантируется.

Результаты разбора будут записаны в стандартный поток вывода (stdout) в
указанном пользователем формате.  Сообщения об ошибках и другие уведомления
будут направлены в стандартный поток ошибок (stderr).

[leksika]: https://elibrary.unatlib.ru/items/a877d643-bae1-4ba6-8ca3-bf2b5f1fe709
